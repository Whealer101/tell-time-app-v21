<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Learn to Tell Time!</title>
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect } = React;
        
        // Lucide icons as inline SVG components
        const Star = ({ size = 24, className = "" }) => (
            <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>
            </svg>
        );
        
        const Clock = ({ size = 24, className = "" }) => (
            <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <circle cx="12" cy="12" r="10"></circle>
                <polyline points="12 6 12 12 16 14"></polyline>
            </svg>
        );
        
        const Trophy = ({ size = 24, className = "" }) => (
            <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"></path>
                <path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"></path>
                <path d="M4 22h16"></path>
                <path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"></path>
                <path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"></path>
                <path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"></path>
            </svg>
        );
        
        const Lock = ({ size = 24, className = "" }) => (
            <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
            </svg>
        );
        
        const Volume2 = ({ size = 24, className = "" }) => (
            <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>
                <path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"></path>
            </svg>
        );

        const TimeApp = () => {
            const [currentLevel, setCurrentLevel] = useState(1);
            const [questionNumber, setQuestionNumber] = useState(1);
            const [currentTime, setCurrentTime] = useState({ hour: 3, minute: 0, text: "3 o'clock" });
            const [answerChoices, setAnswerChoices] = useState([]);
            const [selectedAnswer, setSelectedAnswer] = useState(null);
            const [result, setResult] = useState(null);
            const [totalScore, setTotalScore] = useState(0);
            const [levelScores, setLevelScores] = useState({ 1: 0, 2: 0, 3: 0 });
            const [completedLevels, setCompletedLevels] = useState([]);
            const [showLevelComplete, setShowLevelComplete] = useState(false);
            const [hasAnsweredCorrectly, setHasAnsweredCorrectly] = useState(false);

            const level1Times = [
                { hour: 1, minute: 0, text: "1 o'clock" },
                { hour: 2, minute: 0, text: "2 o'clock" },
                { hour: 3, minute: 0, text: "3 o'clock" },
                { hour: 4, minute: 0, text: "4 o'clock" },
                { hour: 5, minute: 0, text: "5 o'clock" },
                { hour: 6, minute: 0, text: "6 o'clock" },
                { hour: 7, minute: 0, text: "7 o'clock" },
                { hour: 8, minute: 0, text: "8 o'clock" },
                { hour: 9, minute: 0, text: "9 o'clock" },
                { hour: 10, minute: 0, text: "10 o'clock" },
                { hour: 11, minute: 0, text: "11 o'clock" },
                { hour: 12, minute: 0, text: "12 o'clock" }
            ];

            const level2Times = [
                { hour: 1, minute: 0, text: "1 o'clock" },
                { hour: 1, minute: 30, text: "half past 1" },
                { hour: 2, minute: 0, text: "2 o'clock" },
                { hour: 2, minute: 30, text: "half past 2" },
                { hour: 3, minute: 0, text: "3 o'clock" },
                { hour: 3, minute: 30, text: "half past 3" },
                { hour: 4, minute: 30, text: "half past 4" },
                { hour: 5, minute: 0, text: "5 o'clock" },
                { hour: 6, minute: 30, text: "half past 6" },
                { hour: 7, minute: 0, text: "7 o'clock" },
                { hour: 9, minute: 0, text: "9 o'clock" },
                { hour: 9, minute: 30, text: "half past 9" },
                { hour: 12, minute: 30, text: "half past 12" }
            ];

            const level3Times = [
                { hour: 1, minute: 15, text: "quarter past 1" },
                { hour: 2, minute: 45, text: "quarter to 3" },
                { hour: 3, minute: 15, text: "quarter past 3" },
                { hour: 3, minute: 45, text: "quarter to 4" },
                { hour: 4, minute: 15, text: "quarter past 4" },
                { hour: 5, minute: 45, text: "quarter to 6" },
                { hour: 6, minute: 15, text: "quarter past 6" },
                { hour: 6, minute: 45, text: "quarter to 7" },
                { hour: 9, minute: 15, text: "quarter past 9" },
                { hour: 9, minute: 45, text: "quarter to 10" },
                { hour: 12, minute: 15, text: "quarter past 12" },
                { hour: 12, minute: 45, text: "quarter to 1" }
            ];

            useEffect(() => {
                generateNewTime();
            }, [currentLevel, questionNumber]);

            const speakQuestion = () => {
                if (window.speechSynthesis) {
                    speechSynthesis.cancel();
                    const utterance = new SpeechSynthesisUtterance(`Question ${questionNumber}. What time is it? Look at the clock and pick the correct answer!`);
                    utterance.rate = 1.1;
                    utterance.pitch = 1.8;
                    utterance.volume = 1;
                    speechSynthesis.speak(utterance);
                }
            };

            const playSuccessSound = () => {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                [523.25, 659.25, 783.99].forEach((freq, i) => {
                    const oscillator = audioContext.createOscillator();
                    const gainNode = audioContext.createGain();
                    oscillator.connect(gainNode);
                    gainNode.connect(audioContext.destination);
                    oscillator.frequency.value = freq;
                    oscillator.type = 'sine';
                    gainNode.gain.setValueAtTime(0.3, audioContext.currentTime + i * 0.15);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + i * 0.15 + 0.3);
                    oscillator.start(audioContext.currentTime + i * 0.15);
                    oscillator.stop(audioContext.currentTime + i * 0.15 + 0.3);
                });
            };

            const playErrorSound = () => {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                [400, 350].forEach((freq, i) => {
                    const oscillator = audioContext.createOscillator();
                    const gainNode = audioContext.createGain();
                    oscillator.connect(gainNode);
                    gainNode.connect(audioContext.destination);
                    oscillator.frequency.value = freq;
                    oscillator.type = 'sine';
                    gainNode.gain.setValueAtTime(0.2, audioContext.currentTime + i * 0.2);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + i * 0.2 + 0.3);
                    oscillator.start(audioContext.currentTime + i * 0.2);
                    oscillator.stop(audioContext.currentTime + i * 0.2 + 0.3);
                });
            };

            const playLevelCompleteSound = () => {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                [523.25, 659.25, 783.99, 1046.50].forEach((freq, i) => {
                    const oscillator = audioContext.createOscillator();
                    const gainNode = audioContext.createGain();
                    oscillator.connect(gainNode);
                    gainNode.connect(audioContext.destination);
                    oscillator.frequency.value = freq;
                    oscillator.type = 'sine';
                    gainNode.gain.setValueAtTime(0.3, audioContext.currentTime + i * 0.12);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + i * 0.12 + 0.4);
                    oscillator.start(audioContext.currentTime + i * 0.12);
                    oscillator.stop(audioContext.currentTime + i * 0.12 + 0.4);
                });
            };

            const generateAnswerChoices = (correctAnswer, allTimes) => {
                const wrongAnswers = allTimes
                    .filter(t => t.text !== correctAnswer.text)
                    .sort(() => Math.random() - 0.5)
                    .slice(0, 3);
                
                const choices = [correctAnswer, ...wrongAnswers].sort(() => Math.random() - 0.5);
                return choices;
            };

            const generateNewTime = () => {
                let times = level1Times;
                if (currentLevel === 2) times = level2Times;
                if (currentLevel === 3) times = level3Times;

                const randomTime = times[Math.floor(Math.random() * times.length)];
                setCurrentTime(randomTime);
                setAnswerChoices(generateAnswerChoices(randomTime, times));
                setSelectedAnswer(null);
                setResult(null);
                setHasAnsweredCorrectly(false);

                setTimeout(() => {
                    speakQuestion();
                }, 500);
            };

            const checkAnswer = (answer) => {
                setSelectedAnswer(answer);

                if (answer.text === currentTime.text) {
                    setResult('correct');
                    setHasAnsweredCorrectly(true);
                    
                    if (!hasAnsweredCorrectly) {
                        const newScore = totalScore + 1;
                        setTotalScore(newScore);
                        
                        const newLevelScore = (levelScores[currentLevel] || 0) + 1;
                        setLevelScores({ ...levelScores, [currentLevel]: newLevelScore });
                    }
                    
                    playSuccessSound();

                    setTimeout(() => {
                        const utterance = new SpeechSynthesisUtterance(`Amazing! You got it right! It's ${currentTime.text}!`);
                        utterance.rate = 1.1;
                        utterance.pitch = 1.8;
                        speechSynthesis.speak(utterance);
                    }, 300);

                    if (questionNumber >= 5) {
                        setTimeout(() => {
                            setShowLevelComplete(true);
                            if (!completedLevels.includes(currentLevel)) {
                                setCompletedLevels([...completedLevels, currentLevel]);
                            }
                            playLevelCompleteSound();
                            
                            setTimeout(() => {
                                const finalScore = hasAnsweredCorrectly ? levelScores[currentLevel] : (levelScores[currentLevel] || 0) + 1;
                                const utterance = new SpeechSynthesisUtterance(`Congratulations! You completed level ${currentLevel}! You got ${finalScore} out of 5 correct!`);
                                utterance.rate = 1.1;
                                utterance.pitch = 1.8;
                                speechSynthesis.speak(utterance);
                            }, 500);
                        }, 3000);
                    } else {
                        setTimeout(() => {
                            setQuestionNumber(questionNumber + 1);
                        }, 3500);
                    }
                } else {
                    setResult('incorrect');
                    playErrorSound();

                    setTimeout(() => {
                        const utterance = new SpeechSynthesisUtterance(`Not quite! Try again! You can do it!`);
                        utterance.rate = 1.1;
                        utterance.pitch = 1.8;
                        speechSynthesis.speak(utterance);
                    }, 300);

                    setTimeout(() => {
                        setResult(null);
                        setSelectedAnswer(null);
                    }, 2500);
                }
            };

            const startLevel = (level) => {
                if (level > 1 && !completedLevels.includes(level - 1)) {
                    return;
                }
                setCurrentLevel(level);
                setQuestionNumber(1);
                setShowLevelComplete(false);
                setLevelScores({ ...levelScores, [level]: 0 });
            };

            const drawClock = () => {
                const hourAngle = (currentTime.hour % 12) * 30 + currentTime.minute * 0.5 - 90;
                const minuteAngle = currentTime.minute * 6 - 90;

                return (
                    <div className="relative w-80 h-80 mx-auto">
                        <svg viewBox="0 0 200 200" className="w-full h-full">
                            <circle cx="100" cy="100" r="95" fill="#FFF4E6" stroke="#8B4513" strokeWidth="4" />
                            
                            {[...Array(12)].map((_, i) => {
                                const angle = (i * 30 - 90) * (Math.PI / 180);
                                const x1 = 100 + 75 * Math.cos(angle);
                                const y1 = 100 + 75 * Math.sin(angle);
                                const x2 = 100 + 85 * Math.cos(angle);
                                const y2 = 100 + 85 * Math.sin(angle);
                                return (
                                    <line key={i} x1={x1} y1={y1} x2={x2} y2={y2} stroke="#8B4513" strokeWidth="3" />
                                );
                            })}

                            {[12, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11].map((num, i) => {
                                const angle = (i * 30 - 90) * (Math.PI / 180);
                                const x = 100 + 60 * Math.cos(angle);
                                const y = 100 + 60 * Math.sin(angle);
                                return (
                                    <text key={num} x={x} y={y} textAnchor="middle" dominantBaseline="middle" fontSize="20" fontWeight="bold" fill="#8B4513">
                                        {num}
                                    </text>
                                );
                            })}

                            <line x1="100" y1="100" x2={100 + 40 * Math.cos(hourAngle * Math.PI / 180)} y2={100 + 40 * Math.sin(hourAngle * Math.PI / 180)} stroke="#FF6B6B" strokeWidth="8" strokeLinecap="round" />
                            <line x1="100" y1="100" x2={100 + 60 * Math.cos(minuteAngle * Math.PI / 180)} y2={100 + 60 * Math.sin(minuteAngle * Math.PI / 180)} stroke="#4ECDC4" strokeWidth="6" strokeLinecap="round" />
                            <circle cx="100" cy="100" r="8" fill="#FFD93D" stroke="#8B4513" strokeWidth="2" />
                        </svg>
                    </div>
                );
            };

            const getLevelInfo = (level) => {
                const info = {
                    1: { name: 'Level 1: O\'clock Times', color: 'green', desc: 'Learn times like 3 o\'clock' },
                    2: { name: 'Level 2: Half Past', color: 'orange', desc: 'Learn half past times too!' },
                    3: { name: 'Level 3: Quarter Times', color: 'red', desc: 'Master quarter past & quarter to!' }
                };
                return info[level];
            };

            if (showLevelComplete) {
                return (
                    <div className="min-h-screen bg-gradient-to-br from-yellow-300 via-orange-300 to-pink-300 flex items-center justify-center p-4">
                        <div className="bg-white rounded-3xl shadow-2xl p-12 max-w-2xl text-center">
                            <Trophy size={120} className="text-yellow-500 mx-auto mb-6 animate-bounce" />
                            <h1 className="text-5xl font-bold text-purple-600 mb-4">Level {currentLevel} Complete! ðŸŽ‰</h1>
                            <p className="text-3xl text-gray-700 mb-2">You got {levelScores[currentLevel]} out of 5 correct!</p>
                            <p className="text-2xl text-gray-600 mb-8">Total Score: {totalScore} â­</p>
                            
                            {currentLevel < 3 && completedLevels.includes(currentLevel) && (
                                <button
                                    onClick={() => startLevel(currentLevel + 1)}
                                    className="bg-green-500 hover:bg-green-600 text-white px-12 py-6 rounded-full text-2xl font-bold shadow-lg transform hover:scale-105 transition-all mb-4 w-full"
                                >
                                    ðŸš€ Start Level {currentLevel + 1}
                                </button>
                            )}
                            
                            <button
                                onClick={() => startLevel(currentLevel)}
                                className="bg-blue-500 hover:bg-blue-600 text-white px-12 py-6 rounded-full text-2xl font-bold shadow-lg transform hover:scale-105 transition-all w-full mb-4"
                            >
                                ðŸ”„ Try Level {currentLevel} Again
                            </button>
                            
                            <button
                                onClick={() => {
                                    setShowLevelComplete(false);
                                    setCurrentLevel(1);
                                    setQuestionNumber(1);
                                    setCompletedLevels([]);
                                    setLevelScores({ 1: 0, 2: 0, 3: 0 });
                                    setTotalScore(0);
                                }}
                                className="bg-purple-500 hover:bg-purple-600 text-white px-12 py-6 rounded-full text-2xl font-bold shadow-lg transform hover:scale-105 transition-all w-full"
                            >
                                ðŸ  Back to Level Select
                            </button>
                        </div>
                    </div>
                );
            }

            return (
                <div className="min-h-screen bg-gradient-to-br from-cyan-300 via-blue-300 to-purple-300 p-4">
                    <div className="max-w-6xl mx-auto">
                        <div className="bg-white rounded-3xl shadow-2xl p-6 mb-6">
                            <div className="flex justify-between items-center flex-wrap gap-4">
                                <div className="flex items-center gap-3">
                                    <Clock size={40} className="text-blue-500" />
                                    <div>
                                        <h1 className="text-3xl font-bold text-blue-600">Learn to Tell Time! â°</h1>
                                        <p className="text-lg text-gray-600">{getLevelInfo(currentLevel).name}</p>
                                    </div>
                                </div>
                                <div className="flex items-center gap-4">
                                    <div className="bg-purple-100 px-6 py-3 rounded-full">
                                        <span className="text-xl font-bold text-purple-700">Question {questionNumber}/5</span>
                                    </div>
                                    <div className="flex items-center gap-2 bg-yellow-100 px-6 py-3 rounded-full">
                                        <Trophy size={32} className="text-yellow-600" />
                                        <span className="text-2xl font-bold text-gray-700">{totalScore}</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div className="bg-white rounded-2xl shadow-xl p-6 mb-6">
                            <h2 className="text-2xl font-bold text-gray-700 mb-4 text-center">Your Progress:</h2>
                            <div className="grid grid-cols-3 gap-4">
                                {[1, 2, 3].map((level) => {
                                    const info = getLevelInfo(level);
                                    const isLocked = level > 1 && !completedLevels.includes(level - 1);
                                    const isCompleted = completedLevels.includes(level);
                                    const isCurrent = level === currentLevel;
                                    
                                    return (
                                        <div
                                            key={level}
                                            className={`${
                                                isLocked ? 'bg-gray-200' : 
                                                isCurrent ? `bg-${info.color}-200 border-4 border-${info.color}-500` :
                                                isCompleted ? `bg-${info.color}-100` : 
                                                'bg-gray-100'
                                            } p-6 rounded-xl text-center relative`}
                                        >
                                            {isLocked && <Lock size={24} className="absolute top-2 right-2 text-gray-500" />}
                                            {isCompleted && <Star size={24} className="absolute top-2 right-2 text-yellow-500" />}
                                            <div className={`text-4xl font-bold ${isLocked ? 'text-gray-400' : `text-${info.color}-600`} mb-2`}>
                                                Level {level}
                                            </div>
                                            <p className={`text-sm ${isLocked ? 'text-gray-500' : 'text-gray-700'} font-semibold`}>
                                                {info.desc}
                                            </p>
                                            {isCompleted && (
                                                <p className="text-xs text-gray-600 mt-2">âœ“ Completed!</p>
                                            )}
                                        </div>
                                    );
                                })}
                            </div>
                        </div>

                        <div className="grid md:grid-cols-2 gap-6">
                            <div className="bg-white rounded-3xl shadow-2xl p-8">
                                <h2 className="text-3xl font-bold text-center text-purple-600 mb-4">
                                    What time is it? ðŸ¤”
                                </h2>
                                <button
                                    onClick={speakQuestion}
                                    className="mx-auto flex items-center gap-2 bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-full text-lg font-bold mb-4 shadow-lg transform hover:scale-105 transition-all"
                                >
                                    <Volume2 size={20} />
                                    Hear Question
                                </button>
                                {drawClock()}
                            </div>

                            <div className="bg-white rounded-3xl shadow-2xl p-8">
                                <h2 className="text-3xl font-bold text-center text-green-600 mb-6">
                                    Pick the correct time! ðŸ‘‡
                                </h2>

                                <div className="space-y-4">
                                    {answerChoices.map((choice, index) => {
                                        const isSelected = selectedAnswer?.text === choice.text;
                                        const isCorrect = choice.text === currentTime.text;
                                        const showResult = result !== null && isSelected;
                                        
                                        return (
                                            <button
                                                key={index}
                                                onClick={() => !result && checkAnswer(choice)}
                                                disabled={result !== null}
                                                className={`w-full p-6 rounded-2xl text-2xl font-bold shadow-lg transform transition-all ${
                                                    showResult && isCorrect
                                                        ? 'bg-green-500 text-white scale-105 animate-bounce'
                                                        : showResult && !isCorrect
                                                        ? 'bg-red-500 text-white'
                                                        : isSelected
                                                        ? 'bg-blue-300 text-gray-800'
                                                        : 'bg-blue-100 text-gray-700 hover:bg-blue-200 hover:scale-105'
                                                } ${result ? 'cursor-not-allowed' : 'cursor-pointer'}`}
                                            >
                                                {choice.text}
                                                {showResult && isCorrect && ' âœ“'}
                                                {showResult && !isCorrect && ' âœ—'}
                                            </button>
                                        );
                                    })}
                                </div>

                                {result === 'correct' && (
                                    <div className="mt-6 bg-green-100 border-4 border-green-500 rounded-2xl p-6 text-center">
                                        <Star size={60} className="text-yellow-500 mx-auto mb-2" />
                                        <p className="text-3xl font-bold text-green-700">Perfect! ðŸŽ‰</p>
                                    </div>
                                )}

                                {result === 'incorrect' && (
                                    <div className="mt-6 bg-red-100 border-4 border-red-500 rounded-2xl p-6 text-center">
                                        <p className="text-3xl font-bold text-red-700">Not quite! ðŸ˜Š</p>
                                        <p className="text-xl text-gray-700 mt-2">The answer is {currentTime.text}</p>
                                    </div>
                                )}
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        ReactDOM.render(<TimeApp />, document.getElementById('root'));
    </script>
</body>
</html>

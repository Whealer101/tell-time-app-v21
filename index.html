<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Learn to Tell Time - Complete</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body{margin:0;padding:0;font-family:system-ui,sans-serif}
        input[type="range"]::-webkit-slider-thumb{-webkit-appearance:none;width:20px;height:20px;background:#3B82F6;cursor:pointer;border-radius:50%}
        input[type="range"]::-moz-range-thumb{width:20px;height:20px;background:#3B82F6;cursor:pointer;border-radius:50%;border:none}
    </style>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">


import React, { useState, useEffect } from 'react';
import { Star, Clock, Trophy, Lock, Volume2 } from 'lucide-react';

const TimeApp = () => {
  const [showLanding, setShowLanding] = useState(true);
  const [showMenu, setShowMenu] = useState(false);
  const [showTutorial, setShowTutorial] = useState(false);
  const [tutorialStep, setTutorialStep] = useState(0);
  const [userName, setUserName] = useState('');
  const [currentLevel, setCurrentLevel] = useState(1);
  const [questionNumber, setQuestionNumber] = useState(1);
  const [currentTime, setCurrentTime] = useState({ hour: 3, minute: 0, text: "3 o'clock" });
  const [answerChoices, setAnswerChoices] = useState([]);
  const [selectedAnswer, setSelectedAnswer] = useState(null);
  const [result, setResult] = useState(null);
  const [totalScore, setTotalScore] = useState(0);
  const [levelScores, setLevelScores] = useState({ 1: 0, 2: 0, 3: 0 });
  const [completedLevels, setCompletedLevels] = useState([]);
  const [showLevelComplete, setShowLevelComplete] = useState(false);
  const [hasAnsweredCorrectly, setHasAnsweredCorrectly] = useState(false);
  const [showCelebration, setShowCelebration] = useState(false);
  const [confetti, setConfetti] = useState([]);
  const [volume, setVolume] = useState(0.8);
  const [showVolumeControl, setShowVolumeControl] = useState(false);
  const [quizStartTime, setQuizStartTime] = useState(null);
  const [quizEndTime, setQuizEndTime] = useState(null);
  const [totalQuizTime, setTotalQuizTime] = useState(null);

  const level1Times = [
    { hour: 1, minute: 0, text: "1 o'clock" },
    { hour: 2, minute: 0, text: "2 o'clock" },
    { hour: 3, minute: 0, text: "3 o'clock" },
    { hour: 4, minute: 0, text: "4 o'clock" },
    { hour: 5, minute: 0, text: "5 o'clock" },
    { hour: 6, minute: 0, text: "6 o'clock" },
    { hour: 7, minute: 0, text: "7 o'clock" },
    { hour: 8, minute: 0, text: "8 o'clock" },
    { hour: 9, minute: 0, text: "9 o'clock" },
    { hour: 10, minute: 0, text: "10 o'clock" },
    { hour: 11, minute: 0, text: "11 o'clock" },
    { hour: 12, minute: 0, text: "12 o'clock" }
  ];

  const level2Times = [
    { hour: 1, minute: 0, text: "1 o'clock" },
    { hour: 1, minute: 30, text: "half past 1" },
    { hour: 2, minute: 0, text: "2 o'clock" },
    { hour: 2, minute: 30, text: "half past 2" },
    { hour: 3, minute: 0, text: "3 o'clock" },
    { hour: 3, minute: 30, text: "half past 3" },
    { hour: 4, minute: 30, text: "half past 4" },
    { hour: 5, minute: 0, text: "5 o'clock" },
    { hour: 6, minute: 30, text: "half past 6" },
    { hour: 7, minute: 0, text: "7 o'clock" },
    { hour: 9, minute: 0, text: "9 o'clock" },
    { hour: 9, minute: 30, text: "half past 9" },
    { hour: 12, minute: 30, text: "half past 12" }
  ];

  const level3Times = [
    { hour: 1, minute: 15, text: "quarter past 1" },
    { hour: 2, minute: 45, text: "quarter to 3" },
    { hour: 3, minute: 15, text: "quarter past 3" },
    { hour: 3, minute: 45, text: "quarter to 4" },
    { hour: 4, minute: 15, text: "quarter past 4" },
    { hour: 5, minute: 45, text: "quarter to 6" },
    { hour: 6, minute: 15, text: "quarter past 6" },
    { hour: 6, minute: 45, text: "quarter to 7" },
    { hour: 9, minute: 15, text: "quarter past 9" },
    { hour: 9, minute: 45, text: "quarter to 10" },
    { hour: 12, minute: 15, text: "quarter past 12" },
    { hour: 12, minute: 45, text: "quarter to 1" }
  ];

  const tutorialSteps = [
    {
      time: { hour: 3, minute: 0 },
      title: "Meet the Clock! ‚è∞",
      text: "This is a clock! It has numbers from 1 to 12 going around in a circle.",
      voice: "This is a clock! It has numbers from 1 to 12 going around in a circle."
    },
    {
      time: { hour: 3, minute: 0 },
      title: "The Hour Hand üî¥",
      text: "The SHORT RED hand tells us the HOUR. It points to the number 3, so it's 3 o'clock!",
      voice: "The short red hand tells us the hour. It points to the number 3, so it's 3 o'clock!"
    },
    {
      time: { hour: 3, minute: 0 },
      title: "The Minute Hand üîµ",
      text: "The LONG BLUE hand tells us the MINUTES. When it points to 12, we say 'o'clock'!",
      voice: "The long blue hand tells us the minutes. When it points to 12, we say o'clock!"
    },
    {
      time: { hour: 6, minute: 0 },
      title: "Practice: 6 o'clock",
      text: "Look! The hour hand points to 6, and the minute hand points to 12. So it's 6 o'clock!",
      voice: "Look! The hour hand points to 6, and the minute hand points to 12. So it's 6 o'clock!"
    },
    {
      time: { hour: 9, minute: 30 },
      title: "Half Past üï§",
      text: "When the minute hand points to 6 (halfway around), we say 'half past'! This is half past 9!",
      voice: "When the minute hand points to 6, halfway around, we say half past! This is half past 9!"
    },
    {
      time: { hour: 3, minute: 15 },
      title: "Quarter Past üïí",
      text: "When the minute hand points to 3, we say 'quarter past'! This is quarter past 3!",
      voice: "When the minute hand points to 3, we say quarter past! This is quarter past 3!"
    },
    {
      time: { hour: 3, minute: 45 },
      title: "Quarter To üïí",
      text: "When the minute hand points to 9, we say 'quarter to' the next hour! This is quarter to 4!",
      voice: "When the minute hand points to 9, we say quarter to the next hour! This is quarter to 4!"
    }
  ];

  useEffect(() => {
    if (showLanding) {
      setTimeout(() => {
        const utterance = new SpeechSynthesisUtterance('Hello! Today you will be learning to tell time! There will be a tutorial to teach you, and a quiz to test what you learned. Before we start, please enter your name.');
        utterance.rate = 0.9;
        utterance.pitch = 1.8;
        utterance.volume = 1;
        speechSynthesis.speak(utterance);
      }, 1000);
    }
  }, [showLanding]);

  useEffect(() => {
    if (!showLanding && !showMenu && !showTutorial && !showLevelComplete && !showCelebration) {
      generateNewTime();
    }
  }, [currentLevel, questionNumber, showLanding, showMenu, showTutorial, showLevelComplete, showCelebration]);

  useEffect(() => {
    if (showCelebration) {
      const newConfetti = [];
      for (let i = 0; i < 50; i++) {
        newConfetti.push({
          id: i,
          left: Math.random() * 100,
          delay: Math.random() * 0.5,
          duration: 2 + Math.random() * 2,
          color: ['#FFD700', '#FF69B4', '#00CED1', '#FF6347', '#32CD32'][Math.floor(Math.random() * 5)]
        });
      }
      setConfetti(newConfetti);
    }
  }, [showCelebration]);

  const speakQuestion = () => {
    if (window.speechSynthesis) {
      speechSynthesis.cancel();
      const greeting = userName ? `${userName}, question ${questionNumber}.` : `Question ${questionNumber}.`;
      const utterance = new SpeechSynthesisUtterance(`${greeting} What time is it? Look at the clock and pick the correct answer!`);
      utterance.rate = 0.9;
      utterance.pitch = 1.8;
      utterance.volume = 1;
      speechSynthesis.speak(utterance);
    }
  };

  const playSuccessSound = () => {
    const audioContext = new (window.AudioContext || window.webkitAudioContext)();
    [523.25, 659.25, 783.99].forEach((freq, i) => {
      const oscillator = audioContext.createOscillator();
      const gainNode = audioContext.createGain();
      oscillator.connect(gainNode);
      gainNode.connect(audioContext.destination);
      oscillator.frequency.value = freq;
      oscillator.type = 'sine';
      gainNode.gain.setValueAtTime(0.3, audioContext.currentTime + i * 0.15);
      gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + i * 0.15 + 0.3);
      oscillator.start(audioContext.currentTime + i * 0.15);
      oscillator.stop(audioContext.currentTime + i * 0.15 + 0.3);
    });
  };

  const playErrorSound = () => {
    const audioContext = new (window.AudioContext || window.webkitAudioContext)();
    [400, 350].forEach((freq, i) => {
      const oscillator = audioContext.createOscillator();
      const gainNode = audioContext.createGain();
      oscillator.connect(gainNode);
      gainNode.connect(audioContext.destination);
      oscillator.frequency.value = freq;
      oscillator.type = 'sine';
      gainNode.gain.setValueAtTime(0.2, audioContext.currentTime + i * 0.2);
      gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + i * 0.2 + 0.3);
      oscillator.start(audioContext.currentTime + i * 0.2);
      oscillator.stop(audioContext.currentTime + i * 0.2 + 0.3);
    });
  };

  const playLevelCompleteSound = () => {
    const audioContext = new (window.AudioContext || window.webkitAudioContext)();
    [523.25, 659.25, 783.99, 1046.50].forEach((freq, i) => {
      const oscillator = audioContext.createOscillator();
      const gainNode = audioContext.createGain();
      oscillator.connect(gainNode);
      gainNode.connect(audioContext.destination);
      oscillator.frequency.value = freq;
      oscillator.type = 'sine';
      gainNode.gain.setValueAtTime(0.3, audioContext.currentTime + i * 0.12);
      gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + i * 0.12 + 0.4);
      oscillator.start(audioContext.currentTime + i * 0.12);
      oscillator.stop(audioContext.currentTime + i * 0.12 + 0.4);
    });
  };

  const generateAnswerChoices = (correctAnswer, allTimes) => {
    const wrongAnswers = allTimes
      .filter(t => t.text !== correctAnswer.text)
      .sort(() => Math.random() - 0.5)
      .slice(0, 3);
    
    const choices = [correctAnswer, ...wrongAnswers].sort(() => Math.random() - 0.5);
    return choices;
  };

  const generateNewTime = () => {
    let times = level1Times;
    if (currentLevel === 2) times = level2Times;
    if (currentLevel === 3) times = level3Times;

    const randomTime = times[Math.floor(Math.random() * times.length)];
    setCurrentTime(randomTime);
    setAnswerChoices(generateAnswerChoices(randomTime, times));
    setSelectedAnswer(null);
    setResult(null);
    setHasAnsweredCorrectly(false);

    setTimeout(() => {
      speakQuestion();
    }, 1000);
  };

  const checkAnswer = (answer) => {
    setSelectedAnswer(answer);

    if (answer.text === currentTime.text) {
      setResult('correct');
      setHasAnsweredCorrectly(true);
      
      if (!hasAnsweredCorrectly) {
        const newScore = totalScore + 1;
        setTotalScore(newScore);
        
        const newLevelScore = (levelScores[currentLevel] || 0) + 1;
        setLevelScores({ ...levelScores, [currentLevel]: newLevelScore });
      }
      
      playSuccessSound();

      setTimeout(() => {
        const encouragement = userName ? `Amazing ${userName}! You got it right!` : 'Amazing! You got it right!';
        const utterance = new SpeechSynthesisUtterance(`${encouragement} It's ${currentTime.text}!`);
        utterance.rate = 0.9;
        utterance.pitch = 1.8;
        speechSynthesis.speak(utterance);
      }, 500);

      if (questionNumber >= 5) {
        setTimeout(() => {
          setShowCelebration(true);
          setTimeout(() => {
            setShowLevelComplete(true);
            setShowCelebration(false);
          }, 3000);
          
          if (!completedLevels.includes(currentLevel)) {
            setCompletedLevels([...completedLevels, currentLevel]);
          }
          playLevelCompleteSound();
          
          setTimeout(() => {
            const finalScore = hasAnsweredCorrectly ? levelScores[currentLevel] : (levelScores[currentLevel] || 0) + 1;
            const congratsMessage = userName 
              ? `Congratulations ${userName}! You completed level ${currentLevel}! You got ${finalScore} out of 5 correct!`
              : `Congratulations! You completed level ${currentLevel}! You got ${finalScore} out of 5 correct!`;
            const utterance = new SpeechSynthesisUtterance(congratsMessage);
            utterance.rate = 0.9;
            utterance.pitch = 1.8;
            speechSynthesis.speak(utterance);
          }, 1000);
        }, 4000);
      } else {
        setTimeout(() => {
          setQuestionNumber(questionNumber + 1);
        }, 4500);
      }
    } else {
      setResult('incorrect');
      playErrorSound();

      setTimeout(() => {
        const utterance = new SpeechSynthesisUtterance('Not quite! Try again! You can do it!');
        utterance.rate = 0.9;
        utterance.pitch = 1.8;
        speechSynthesis.speak(utterance);
      }, 500);

      setTimeout(() => {
        setResult(null);
        setSelectedAnswer(null);
      }, 2500);
    }
  };

  const startLevel = (level) => {
    if (level > 1 && !completedLevels.includes(level - 1)) {
      return;
    }
    setCurrentLevel(level);
    setQuestionNumber(1);
    setShowLevelComplete(false);
    setLevelScores({ ...levelScores, [level]: 0 });
  };

  const startApp = () => {
    if (userName.trim()) {
      setShowLanding(false);
      setShowMenu(true);
      setTimeout(() => {
        const utterance = new SpeechSynthesisUtterance(`Welcome ${userName}! What would you like to do? Learn how to tell time or take a quiz?`);
        utterance.rate = 0.9;
        utterance.pitch = 1.8;
        speechSynthesis.speak(utterance);
      }, 500);
    }
  };

  const startTutorial = () => {
    setShowMenu(false);
    setShowTutorial(true);
    setTutorialStep(0);
    setTimeout(() => {
      const utterance = new SpeechSynthesisUtterance('Great! Let\'s learn how to tell time! Pay attention to the clock!');
      utterance.rate = 0.9;
      utterance.pitch = 1.8;
      speechSynthesis.speak(utterance);
    }, 500);
  };

  const startQuiz = () => {
    setShowMenu(false);
    setCurrentLevel(1);
    setQuestionNumber(1);
    setCompletedLevels([]);
    setLevelScores({ 1: 0, 2: 0, 3: 0 });
    setTotalScore(0);
    setTimeout(() => {
      const utterance = new SpeechSynthesisUtterance('Let\'s start the quiz! Are you ready?');
      utterance.rate = 0.9;
      utterance.pitch = 1.8;
      speechSynthesis.speak(utterance);
    }, 500);
  };

  const nextTutorialStep = () => {
    if (tutorialStep < tutorialSteps.length - 1) {
      const nextStep = tutorialStep + 1;
      setTutorialStep(nextStep);
      setTimeout(() => {
        const utterance = new SpeechSynthesisUtterance(tutorialSteps[nextStep].voice);
        utterance.rate = 0.9;
        utterance.pitch = 1.8;
        speechSynthesis.speak(utterance);
      }, 500);
    } else {
      setShowTutorial(false);
      setShowMenu(true);
      setTimeout(() => {
        const utterance = new SpeechSynthesisUtterance('Great job! Now you know how to tell time! Would you like to take a quiz?');
        utterance.rate = 0.9;
        utterance.pitch = 1.8;
        speechSynthesis.speak(utterance);
      }, 500);
    }
  };

  const drawClock = () => {
    const hourAngle = (currentTime.hour % 12) * 30 + currentTime.minute * 0.5 - 90;
    const minuteAngle = currentTime.minute * 6 - 90;

    return (
      <div className="relative w-80 h-80 mx-auto">
        <svg viewBox="0 0 200 200" className="w-full h-full">
          <circle cx="100" cy="100" r="95" fill="#FFF4E6" stroke="#8B4513" strokeWidth="4" />
          
          {[...Array(12)].map((_, i) => {
            const angle = (i * 30 - 90) * (Math.PI / 180);
            const x1 = 100 + 75 * Math.cos(angle);
            const y1 = 100 + 75 * Math.sin(angle);
            const x2 = 100 + 85 * Math.cos(angle);
            const y2 = 100 + 85 * Math.sin(angle);
            return (
              <line key={i} x1={x1} y1={y1} x2={x2} y2={y2} stroke="#8B4513" strokeWidth="3" />
            );
          })}

          {[12, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11].map((num, i) => {
            const angle = (i * 30 - 90) * (Math.PI / 180);
            const x = 100 + 60 * Math.cos(angle);
            const y = 100 + 60 * Math.sin(angle);
            return (
              <text key={num} x={x} y={y} textAnchor="middle" dominantBaseline="middle" fontSize="20" fontWeight="bold" fill="#8B4513">
                {num}
              </text>
            );
          })}

          <line x1="100" y1="100" x2={100 + 40 * Math.cos(hourAngle * Math.PI / 180)} y2={100 + 40 * Math.sin(hourAngle * Math.PI / 180)} stroke="#FF6B6B" strokeWidth="8" strokeLinecap="round" />
          <line x1="100" y1="100" x2={100 + 60 * Math.cos(minuteAngle * Math.PI / 180)} y2={100 + 60 * Math.sin(minuteAngle * Math.PI / 180)} stroke="#4ECDC4" strokeWidth="6" strokeLinecap="round" />
          <circle cx="100" cy="100" r="8" fill="#FFD93D" stroke="#8B4513" strokeWidth="2" />
        </svg>
      </div>
    );
  };

  const drawTutorialClock = (time) => {
    const hourAngle = (time.hour % 12) * 30 + (time.minute || 0) * 0.5 - 90;
    const minuteAngle = (time.minute || 0) * 6 - 90;

    return (
      <div className="relative w-96 h-96 mx-auto">
        <svg viewBox="0 0 200 200" className="w-full h-full">
          <circle cx="100" cy="100" r="95" fill="#FFF4E6" stroke="#8B4513" strokeWidth="4" />
          
          {[...Array(12)].map((_, i) => {
            const angle = (i * 30 - 90) * (Math.PI / 180);
            const x1 = 100 + 75 * Math.cos(angle);
            const y1 = 100 + 75 * Math.sin(angle);
            const x2 = 100 + 85 * Math.cos(angle);
            const y2 = 100 + 85 * Math.sin(angle);
            return (
              <line key={i} x1={x1} y1={y1} x2={x2} y2={y2} stroke="#8B4513" strokeWidth="3" />
            );
          })}

          {[12, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11].map((num, i) => {
            const angle = (i * 30 - 90) * (Math.PI / 180);
            const x = 100 + 60 * Math.cos(angle);
            const y = 100 + 60 * Math.sin(angle);
            return (
              <text key={num} x={x} y={y} textAnchor="middle" dominantBaseline="middle" fontSize="24" fontWeight="bold" fill="#8B4513">
                {num}
              </text>
            );
          })}

          <line x1="100" y1="100" x2={100 + 40 * Math.cos(hourAngle * Math.PI / 180)} y2={100 + 40 * Math.sin(hourAngle * Math.PI / 180)} stroke="#FF6B6B" strokeWidth="10" strokeLinecap="round" />
          <line x1="100" y1="100" x2={100 + 65 * Math.cos(minuteAngle * Math.PI / 180)} y2={100 + 65 * Math.sin(minuteAngle * Math.PI / 180)} stroke="#4ECDC4" strokeWidth="8" strokeLinecap="round" />
          <circle cx="100" cy="100" r="10" fill="#FFD93D" stroke="#8B4513" strokeWidth="3" />
        </svg>
        
        <div className="mt-4 flex justify-center gap-8">
          <div className="flex items-center gap-2">
            <div className="w-12 h-3 bg-red-500 rounded"></div>
            <span className="text-xl font-bold text-gray-700">Hour Hand (Short)</span>
          </div>
          <div className="flex items-center gap-2">
            <div className="w-16 h-2 bg-blue-400 rounded"></div>
            <span className="text-xl font-bold text-gray-700">Minute Hand (Long)</span>
          </div>
        </div>
      </div>
    );
  };

  const getLevelInfo = (level) => {
    const info = {
      1: { name: "Level 1: O'clock Times", color: 'green', desc: "Learn times like 3 o'clock" },
      2: { name: 'Level 2: Half Past', color: 'orange', desc: 'Learn half past times too!' },
      3: { name: 'Level 3: Quarter Times', color: 'red', desc: 'Master quarter past & quarter to!' }
    };
    return info[level];
  };

  if (showLanding) {
    return (
      <div className="min-h-screen bg-gradient-to-br from-purple-400 via-pink-400 to-blue-400 flex items-center justify-center p-4">
        <div className="bg-white rounded-3xl shadow-2xl p-12 max-w-2xl w-full text-center transform hover:scale-105 transition-all">
          <div className="mb-8">
            <div className="text-8xl mb-4 animate-bounce">‚è∞</div>
            <h1 className="text-5xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-pink-600 mb-4">
              Learn to Tell Time!
            </h1>
            <p className="text-2xl text-gray-700 mb-2">A fun app for kids aged 3-6!</p>
          </div>

          <div className="bg-gradient-to-r from-yellow-50 to-orange-50 rounded-2xl p-6 mb-8 border-4 border-yellow-300">
            <div className="text-4xl mb-3">üéôÔ∏è</div>
            <p className="text-xl text-gray-800 font-semibold leading-relaxed">
              Today you will be learning to tell time! There will be a tutorial to teach you, and a quiz to test what you learned.
            </p>
          </div>

          <div className="bg-gradient-to-r from-blue-50 to-purple-50 rounded-2xl p-8 mb-8 shadow-inner">
            <h2 className="text-3xl font-bold text-blue-600 mb-6 animate-pulse">What You'll Learn:</h2>
            <div className="space-y-4 text-left">
              <div className="flex items-center gap-4 transform hover:scale-105 transition-all bg-white rounded-xl p-4 shadow-md">
                <div className="bg-gradient-to-br from-green-400 to-green-600 text-white rounded-full w-12 h-12 flex items-center justify-center text-2xl font-bold shadow-lg">1</div>
                <div>
                  <p className="text-xl font-bold text-gray-800">Level 1: O'clock Times</p>
                  <p className="text-gray-600">Learn times like 3 o'clock, 6 o'clock</p>
                </div>
              </div>
              <div className="flex items-center gap-4 transform hover:scale-105 transition-all bg-white rounded-xl p-4 shadow-md">
                <div className="bg-gradient-to-br from-orange-400 to-orange-600 text-white rounded-full w-12 h-12 flex items-center justify-center text-2xl font-bold shadow-lg">2</div>
                <div>
                  <p className="text-xl font-bold text-gray-800">Level 2: Half Past</p>
                  <p className="text-gray-600">Learn half past times too!</p>
                </div>
              </div>
              <div className="flex items-center gap-4 transform hover:scale-105 transition-all bg-white rounded-xl p-4 shadow-md">
                <div className="bg-gradient-to-br from-red-400 to-red-600 text-white rounded-full w-12 h-12 flex items-center justify-center text-2xl font-bold shadow-lg">3</div>
                <div>
                  <p className="text-xl font-bold text-gray-800">Level 3: Quarter Times</p>
                  <p className="text-gray-600">Master quarter past & quarter to!</p>
                </div>
              </div>
            </div>
          </div>

          <div className="mb-8">
            <label className="block text-2xl font-bold text-gray-700 mb-4">
              Before we start, please enter your name üëã
            </label>
            <input
              type="text"
              value={userName}
              onChange={(e) => setUserName(e.target.value)}
              onKeyPress={(e) => e.key === 'Enter' && userName.trim() && startApp()}
              placeholder="Enter your name here..."
              className="w-full px-6 py-4 text-2xl border-4 border-purple-300 rounded-2xl focus:outline-none focus:border-purple-500 text-center"
              maxLength={20}
              autoFocus
            />
          </div>

          <button
            onClick={startApp}
            disabled={!userName.trim()}
            className="bg-gradient-to-r from-purple-500 via-pink-500 to-purple-500 hover:from-purple-600 hover:via-pink-600 hover:to-purple-600 disabled:from-gray-300 disabled:to-gray-400 disabled:cursor-not-allowed text-white px-12 py-6 rounded-full text-3xl font-bold shadow-2xl transform hover:scale-110 transition-all w-full"
          >
            üöÄ Continue
          </button>

          <div className="mt-8 bg-yellow-50 rounded-xl p-4">
            <p className="text-gray-600">
              <strong>üéØ Tip:</strong> Make sure your sound is on to hear the instructions!
            </p>
          </div>
        </div>
      </div>
    );
  }

  if (showTutorial) {
    const currentStep = tutorialSteps[tutorialStep];
    
    return (
      <div className="min-h-screen bg-gradient-to-br from-yellow-300 via-orange-300 to-pink-300 flex items-center justify-center p-4">
        <div className="bg-white rounded-3xl shadow-2xl p-12 max-w-4xl w-full">
          <div className="text-center mb-8">
            <h1 className="text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-orange-600 to-red-600 mb-2">
              {currentStep.title}
            </h1>
            <p className="text-xl text-gray-600">Step {tutorialStep + 1} of {tutorialSteps.length}</p>
          </div>
          
          <div className="mb-8">
            {drawTutorialClock(currentStep.time)}
          </div>
          
          <div className="bg-gradient-to-r from-blue-50 to-purple-50 rounded-2xl p-8 mb-8">
            <p className="text-3xl text-gray-800 text-center leading-relaxed">
              {currentStep.text}
            </p>
          </div>
          
          <div className="flex justify-center gap-4">
            {tutorialStep > 0 && (
              <button
                onClick={() => {
                  setTutorialStep(tutorialStep - 1);
                  setTimeout(() => {
                    const utterance = new SpeechSynthesisUtterance(tutorialSteps[tutorialStep - 1].voice);
                    utterance.rate = 0.9;
                    utterance.pitch = 1.8;
                    speechSynthesis.speak(utterance);
                  }, 300);
                }}
                className="bg-gray-300 hover:bg-gray-400 text-gray-700 px-8 py-4 rounded-full text-2xl font-bold shadow-lg transform hover:scale-105 transition-all"
              >
                ‚¨ÖÔ∏è Previous
              </button>
            )}
            
            <button
              onClick={nextTutorialStep}
              className="bg-gradient-to-r from-green-400 to-green-600 hover:from-green-500 hover:to-green-700 text-white px-12 py-4 rounded-full text-2xl font-bold shadow-2xl transform hover:scale-110 transition-all animate-pulse"
            >
              {tutorialStep < tutorialSteps.length - 1 ? 'Next ‚û°Ô∏è' : 'Finish! üéâ'}
            </button>
            
            <button
              onClick={() => {
                setShowTutorial(false);
                setShowMenu(true);
              }}
              className="bg-red-400 hover:bg-red-500 text-white px-8 py-4 rounded-full text-2xl font-bold shadow-lg transform hover:scale-105 transition-all"
            >
              ‚ùå Exit
            </button>
          </div>
        </div>
      </div>
    );
  }

  if (showMenu) {
    return (
      <div className="min-h-screen bg-gradient-to-br from-blue-400 via-purple-400 to-pink-400 flex items-center justify-center p-4">
        <div className="bg-white rounded-3xl shadow-2xl p-12 max-w-3xl w-full text-center">
          <h1 className="text-5xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-pink-600 mb-4">
            Hi {userName}! üëã
          </h1>
          <p className="text-2xl text-gray-700 mb-12">What would you like to do?</p>
          
          <div className="grid md:grid-cols-2 gap-8">
            <button
              onClick={startTutorial}
              className="bg-gradient-to-br from-green-400 to-green-600 hover:from-green-500 hover:to-green-700 text-white p-8 rounded-3xl shadow-2xl transform hover:scale-110 transition-all"
            >
              <div className="text-7xl mb-4">üìö</div>
              <h2 className="text-3xl font-bold mb-3">Learn to Tell Time</h2>
              <p className="text-lg">Step-by-step tutorial on how to read a clock!</p>
            </button>
            
            <button
              onClick={startQuiz}
              className="bg-gradient-to-br from-blue-400 to-blue-600 hover:from-blue-500 hover:to-blue-700 text-white p-8 rounded-3xl shadow-2xl transform hover:scale-110 transition-all"
            >
              <div className="text-7xl mb-4">üéØ</div>
              <h2 className="text-3xl font-bold mb-3">Take Quiz</h2>
              <p className="text-lg">Test your skills with fun quizzes!</p>
            </button>
          </div>
          
          <button
            onClick={() => {
              setShowMenu(false);
              setShowLanding(true);
              setUserName('');
            }}
            className="mt-8 bg-gray-200 hover:bg-gray-300 text-gray-700 px-8 py-4 rounded-full text-xl font-bold shadow-lg transform hover:scale-105 transition-all"
          >
            üè† Back to Start
          </button>
        </div>
      </div>
    );
  }

  if (showCelebration) {
    const confettiKeyframes = `
      @keyframes fall {
        0% { transform: translateY(-20px) rotate(0deg); opacity: 1; }
        100% { transform: translateY(100vh) rotate(360deg); opacity: 0; }
      }
    `;
    
    return (
      <div className="min-h-screen bg-gradient-to-br from-yellow-300 via-orange-300 to-pink-300 flex items-center justify-center p-4 relative overflow-hidden">
        <style dangerouslySetInnerHTML={{ __html: confettiKeyframes }} />
        
        {confetti.map((piece) => (
          <div
            key={piece.id}
            className="absolute w-3 h-3 rounded-full"
            style={{
              left: `${piece.left}%`,
              top: '-20px',
              backgroundColor: piece.color,
              animation: `fall ${piece.duration}s ease-in ${piece.delay}s infinite`
            }}
          />
        ))}

        <div className="text-center z-10">
          <div className="text-9xl mb-8 animate-bounce">üéâ</div>
          <h1 className="text-7xl font-bold text-white mb-4 animate-pulse drop-shadow-lg">
            AMAZING!
          </h1>
          <p className="text-5xl font-bold text-white drop-shadow-lg animate-pulse">
            Level {currentLevel} Complete! üèÜ
          </p>
          <div className="mt-8 flex justify-center gap-4">
            <div className="text-6xl animate-bounce" style={{animationDelay: '0s'}}>‚≠ê</div>
            <div className="text-6xl animate-bounce" style={{animationDelay: '0.2s'}}>üéä</div>
            <div className="text-6xl animate-bounce" style={{animationDelay: '0.4s'}}>üéà</div>
          </div>
        </div>
      </div>
    );
  }

  if (showLevelComplete) {
    return (
      <div className="min-h-screen bg-gradient-to-br from-yellow-300 via-orange-300 to-pink-300 flex items-center justify-center p-4">
        <div className="bg-white rounded-3xl shadow-2xl p-12 max-w-2xl text-center transform hover:scale-105 transition-all">
          <Trophy className="text-yellow-500 mx-auto mb-6 animate-bounce" size={120} />
          <h1 className="text-5xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-pink-600 mb-4">
            {userName ? `Great Job ${userName}!` : 'Level Complete!'} üéâ
          </h1>
          <div className="text-6xl mb-4">
            {'‚≠ê'.repeat(levelScores[currentLevel])}
            {'‚òÜ'.repeat(5 - levelScores[currentLevel])}
          </div>
          <p className="text-3xl text-gray-700 mb-2">You got {levelScores[currentLevel]} out of 5 correct!</p>
          <p className="text-2xl text-gray-600 mb-8">Total Score: {totalScore} ‚≠ê</p>
          
          {currentLevel < 3 && completedLevels.includes(currentLevel) && (
            <button
              onClick={() => startLevel(currentLevel + 1)}
              className="bg-gradient-to-r from-green-400 to-green-600 hover:from-green-500 hover:to-green-700 text-white px-12 py-6 rounded-full text-2xl font-bold shadow-2xl transform hover:scale-110 transition-all mb-4 w-full animate-pulse"
            >
              üöÄ Start Level {currentLevel + 1}
            </button>
          )}
          
          <button
            onClick={() => startLevel(currentLevel)}
            className="bg-gradient-to-r from-blue-400 to-blue-600 hover:from-blue-500 hover:to-blue-700 text-white px-12 py-6 rounded-full text-2xl font-bold shadow-2xl transform hover:scale-110 transition-all w-full mb-4"
          >
            üîÑ Try Level {currentLevel} Again
          </button>
          
          <button
            onClick={() => {
              setShowLevelComplete(false);
              setCurrentLevel(1);
              setQuestionNumber(1);
              setCompletedLevels([]);
              setLevelScores({ 1: 0, 2: 0, 3: 0 });
              setTotalScore(0);
              setShowMenu(true);
            }}
            className="bg-gradient-to-r from-purple-400 to-purple-600 hover:from-purple-500 hover:to-purple-700 text-white px-12 py-6 rounded-full text-2xl font-bold shadow-2xl transform hover:scale-110 transition-all w-full"
          >
            üè† Back to Menu
          </button>
        </div>
      </div>
    );
  }

  return (
    <div className="min-h-screen bg-gradient-to-br from-cyan-300 via-blue-300 to-purple-300 p-4">
      <div className="max-w-6xl mx-auto">
        <div className="bg-gradient-to-r from-white to-blue-50 rounded-3xl shadow-2xl p-6 mb-6 transform hover:scale-105 transition-all">
          <div className="flex justify-between items-center flex-wrap gap-4">
            <div className="flex items-center gap-3">
              <Clock className="text-blue-500" size={40} />
              <div>
                <h1 className="text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600">
                  {userName ? `${userName}'s Time Learning!` : 'Learn to Tell Time!'} ‚è∞
                </h1>
                <p className="text-lg text-gray-600">{getLevelInfo(currentLevel).name}</p>
              </div>
            </div>
            <div className="flex items-center gap-4">
              <div className="bg-gradient-to-r from-purple-100 to-pink-100 px-6 py-3 rounded-full shadow-lg animate-pulse">
                <span className="text-xl font-bold text-purple-700">Question {questionNumber}/5</span>
              </div>
              <div className="flex items-center gap-2 bg-gradient-to-r from-yellow-100 to-orange-100 px-6 py-3 rounded-full shadow-lg">
                <Trophy className="text-yellow-600 animate-bounce" size={32} />
                <span className="text-2xl font-bold text-gray-700">{totalScore}</span>
              </div>
            </div>
          </div>
        </div>

        <div className="bg-gradient-to-r from-white to-purple-50 rounded-2xl shadow-2xl p-6 mb-6 transform hover:scale-105 transition-all">
          <h2 className="text-2xl font-bold text-gray-700 mb-4 text-center">Your Progress:</h2>
          <div className="grid grid-cols-3 gap-4">
            {[1, 2, 3].map((level) => {
              const info = getLevelInfo(level);
              const isLocked = level > 1 && !completedLevels.includes(level - 1);
              const isCompleted = completedLevels.includes(level);
              const isCurrent = level === currentLevel;
              
              return (
                <div
                  key={level}
                  className={`p-6 rounded-xl text-center relative transform hover:scale-110 transition-all shadow-lg ${
                    isLocked ? 'bg-gray-200' : 
                    isCurrent ? 'bg-gradient-to-br from-green-200 to-green-300 border-4 border-green-500 animate-pulse' :
                    isCompleted ? 'bg-gradient-to-br from-green-100 to-green-200' : 
                    'bg-gray-100'
                  }`}
                >
                  {isLocked && <Lock className="absolute top-2 right-2 text-gray-500" size={24} />}
                  {isCompleted && <Star className="absolute top-2 right-2 text-yellow-500" size={24} />}
                  <div className={`text-4xl font-bold mb-2 ${isLocked ? 'text-gray-400' : 'text-green-600'}`}>
                    Level {level}
                  </div>
                  <p className={`text-sm font-semibold ${isLocked ? 'text-gray-500' : 'text-gray-700'}`}>
                    {info.desc}
                  </p>
                  {isCompleted && (
                    <p className="text-xs text-gray-600 mt-2 font-bold">‚úì Completed!</p>
                  )}
                </div>
              );
            })}
          </div>
        </div>

        <div className="grid md:grid-cols-2 gap-6">
          <div className="bg-gradient-to-br from-white to-purple-50 rounded-3xl shadow-2xl p-8 transform hover:scale-105 transition-all">
            <h2 className="text-3xl font-bold text-center text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-pink-600 mb-4">
              What time is it? ü§î
            </h2>
            <button
              onClick={speakQuestion}
              className="mx-auto flex items-center gap-2 bg-gradient-to-r from-blue-400 to-blue-600 hover:from-blue-500 hover:to-blue-700 text-white px-6 py-3 rounded-full text-lg font-bold mb-4 shadow-lg transform hover:scale-110 transition-all"
            >
              <Volume2 size={20} />
              Hear Question
            </button>
            {drawClock()}
          </div>

          <div className="bg-gradient-to-br from-white to-green-50 rounded-3xl shadow-2xl p-8 transform hover:scale-105 transition-all">
            <h2 className="text-3xl font-bold text-center text-transparent bg-clip-text bg-gradient-to-r from-green-600 to-blue-600 mb-6">
              Pick the correct time! üëá
            </h2>

            <div className="space-y-4">
              {answerChoices.map((choice, index) => {
                const isSelected = selectedAnswer?.text === choice.text;
                const isCorrect = choice.text === currentTime.text;
                const showResult = result !== null && isSelected;
                
                return (
                  <button
                    key={index}
                    onClick={() => !result && checkAnswer(choice)}
                    disabled={result !== null}
                    className={`w-full p-6 rounded-2xl text-2xl font-bold shadow-lg transform transition-all ${
                      showResult && isCorrect
                        ? 'bg-gradient-to-r from-green-400 to-green-600 text-white scale-110 animate-bounce'
                        : showResult && !isCorrect
                        ? 'bg-gradient-to-r from-red-400 to-red-600 text-white'
                        : isSelected
                        ? 'bg-gradient-to-r from-blue-200 to-blue-300 text-gray-800'
                        : 'bg-gradient-to-r from-blue-100 to-purple-100 text-gray-700 hover:from-blue-200 hover:to-purple-200 hover:scale-105'
                    } ${result ? 'cursor-not-allowed' : 'cursor-pointer'}`}
                  >
                    {choice.text}
                    {showResult && isCorrect && ' ‚úì'}
                    {showResult && !isCorrect && ' ‚úó'}
                  </button>
                );
              })}
            </div>

            {result === 'correct' && (
              <div className="mt-6 bg-gradient-to-r from-green-100 to-green-200 border-4 border-green-500 rounded-2xl p-6 text-center animate-pulse">
                <Star size={60} className="text-yellow-500 mx-auto mb-2" />
                <p className="text-3xl font-bold text-green-700">Perfect! üéâ</p>
              </div>
            )}

            {result === 'incorrect' && (
              <div className="mt-6 bg-gradient-to-r from-red-100 to-red-200 border-4 border-red-500 rounded-2xl p-6 text-center">
                <p className="text-3xl font-bold text-red-700">Not quite! üòä</p>
                <p className="text-xl text-gray-700 mt-2">The answer is {currentTime.text}</p>
              </div>
            )}
          </div>
        </div>
      </div>
    </div>
  );
};



ReactDOM.render(<TimeApp />, document.getElementById('root'));
    </script>
